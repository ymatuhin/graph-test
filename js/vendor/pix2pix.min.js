!function(t,e){function n(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),void 0):(t.attachEvent("on"+e,n),void 0)}function o(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return b[t.which]?b[t.which]:C[t.which]?C[t.which]:String.fromCharCode(t.which).toLowerCase()}function i(t,e){return t.sort().join(",")===e.sort().join(",")}function r(t){t=t||{};var e,n=!1;for(e in K)t[e]?n=!0:K[e]=0;n||(B=!1)}function s(t,e,n,o,r,s){var a,u,c=[],l=n.type;if(!M[t])return[];for("keyup"==l&&h(t)&&(e=[t]),a=0;a<M[t].length;++a)if(u=M[t][a],(o||!u.seq||K[u.seq]==u.level)&&l==u.action&&("keypress"==l&&!n.metaKey&&!n.ctrlKey||i(e,u.modifiers))){var p=!o&&u.combo==r,f=o&&u.seq==o&&u.level==s;(p||f)&&M[t].splice(a,1),c.push(u)}return c}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t,e,n,o){A.stopCallback(e,e.target||e.srcElement,n,o)||t(e,n)===!1&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0)}function c(t,e,n){var o,i=s(t,e,n),a={},c=0,l=!1;for(o=0;o<i.length;++o)i[o].seq&&(c=Math.max(c,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!=c)continue;l=!0,a[i[o].seq]=1,u(i[o].callback,n,i[o].combo,i[o].seq)}else l||u(i[o].callback,n,i[o].combo);var p="keypress"==n.type&&T;n.type!=B||h(t)||p||r(a),T=l&&"keydown"==n.type}function l(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=o(t);if(e)return"keyup"==t.type&&_===e?(_=!1,void 0):(A.handleKey(e,a(t),t),void 0)}function h(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function p(){clearTimeout(k),k=setTimeout(r,1e3)}function f(){if(!x){x={};for(var t in b)t>95&&112>t||b.hasOwnProperty(t)&&(x[b[t]]=t)}return x}function d(t,e,n){return n||(n=f()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t,e,n,i){function s(e){return function(){B=e,++K[t],p()}}function a(e){u(n,e,t),"keyup"!==i&&(_=o(e)),setTimeout(r,10)}K[t]=0;for(var c=0;c<e.length;++c){var l=c+1===e.length,h=l?a:s(i||m(e[c+1]).action);v(e[c],h,i,t,c)}}function g(t){return"+"===t?["+"]:t.split("+")}function m(t,e){var n,o,i,r=[];for(n=g(t),i=0;i<n.length;++i)o=n[i],P[o]&&(o=P[o]),e&&"keypress"!=e&&E[o]&&(o=E[o],r.push("shift")),h(o)&&r.push(o);return e=d(o,r,e),{key:o,modifiers:r,action:e}}function v(t,e,n,o,i){S[t+":"+n]=e,t=t.replace(/\s+/g," ");var r,a=t.split(" ");return a.length>1?(y(t,a,e,n),void 0):(r=m(t,n),M[r.key]=M[r.key]||[],s(r.key,r.modifiers,{type:r.action},o,t,i),M[r.key][o?"unshift":"push"]({callback:e,modifiers:r.modifiers,action:r.action,seq:o,level:i,combo:t}),void 0)}function w(t,e,n){for(var o=0;o<t.length;++o)v(t[o],e,n)}for(var x,k,b={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},P={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M={},S={},K={},_=!1,T=!1,B=!1,I=1;20>I;++I)b[111+I]="f"+I;for(I=0;9>=I;++I)b[I+96]=I;n(e,"keypress",l),n(e,"keydown",l),n(e,"keyup",l);var A={bind:function(t,e,n){return t=t instanceof Array?t:[t],w(t,e,n),this},unbind:function(t,e){return A.bind(t,function(){},e)},trigger:function(t,e){return S[t+":"+e]&&S[t+":"+e]({},t),this},reset:function(){return M={},S={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:c};t.Mousetrap=A,"function"==typeof define&&define.amd&&define(A)}(window,document),function(){var t,e,n;return this.localStorage||this.globalStorage||(t=document.createElement("div"),t.style.display="none",document.getElementsByTagName("head")[0].appendChild(t),!t.addBehavior)?void 0:(t.addBehavior("#default#userdata"),n=this.localStorage={length:0,setItem:function(n,o){return t.load("localStorage"),n=e(n),t.getAttribute(n)||this.length++,t.setAttribute(n,o),t.save("localStorage")},getItem:function(n){return t.load("localStorage"),n=e(n),t.getAttribute(n)},removeItem:function(n){return t.load("localStorage"),n=e(n),t.removeAttribute(n),t.save("localStorage"),this.length--,0>this.length?this.length=0:void 0},clear:function(){var e,n;for(t.load("localStorage"),n=0;e=t.XMLDocument.documentElement.attributes[n++];)t.removeAttribute(e.name);return t.save("localStorage"),this.length=0},key:function(e){return t.load("localStorage"),t.XMLDocument.documentElement.attributes[e]}},e=function(t){return t.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-")},t.load("localStorage"),n.length=t.XMLDocument.documentElement.attributes.length)}(),function(){"use strict";var t,e,n,o,i;i="no",e="index.jpg",n="~Pix2pix~ \nПлагин для pixelperfect верстки. \n\nГорячие клавиши: \n[ ` ] — показать/скрыть изображение \n[ shift + ` ] — закрепить/открепить позицию и прозрачность \n[ стрелки ] — смещение изображение на 1px \n[ shift + стрелки ] — смещение изображение на 10px \n[ + ][ - ] — изменение прозрачности изображения на 0.1 \n[ ctrl + i ] — заменить изображение \n[ * ] — показать/скрыть границы элементов \n[ ctrl + * ] — изменить цвет границы элементов \n[ alt + r ] — сброс настроек плагина \n\nДополнительную информацию о плагине можно прочитать на странице: github.com/ymatuhin/pix2pix \n\nОткрыть эту страницу в новом окне?",window.onload=function(){return o.init()},document.onkeydown=function(e){var r;if(e=e||window.event,e.altKey&&82===e.keyCode)return t.clearAll(),location.reload(),!1;if(112===e.keyCode)return confirm(n)&&window.open("http://github.com/ymatuhin/pix2pix","_blank"),!1;if("no"===i){if(107===e.keyCode||e.shiftKey&&187===e.keyCode)return o.opacity.change("+"),!1;if(109===e.keyCode||e.shiftKey&&189===e.keyCode)return o.opacity.change("-"),!1;if(e.ctrlKey&&73===e.keyCode)return r=prompt("~ Pix2pix ~\nПодробнее о плагине - [F1]\n\nУкажите путь к изображению (url)",o.image.path),null!=r&&""!==r?o.image.change(r):o.destroy(),!1;if(106===e.keyCode&&e.ctrlKey||e.shiftKey&&e.ctrlKey&&56===e.keyCode)return o.shadow.changeColor(),!1;if(106===e.keyCode||e.shiftKey&&56===e.keyCode)return o.shadow.toggle(),!1}},o={first:!1,layer:"",power:"on",init:function(){var t,e;return e=document.createElement("img"),e.id="pix2pix",e.style.position="absolute",e.style.left="50%",e.style.zIndex=1e4,e.src="",t=document.body.firstChild,document.body.insertBefore(e,t),o.layer=document.getElementById("pix2pix"),this.image.init()!==!1?(this.keys.init(),this.toggle.init(),this.pinObj.init(),this.opacity.init(),this.shadow.init()):void 0},destroy:function(){return document.documentElement.removeChild(o.layer)},toggle:{init:function(){return this.get(),this.set()},set:function(){return o.layer.style.display="on"===this.power?"block":"none",this.save()},get:function(){return this.power=t.get("power")||"on"},save:function(){return t.save("power",this.power)},change:function(){return this.power="on"===this.power?"off":"on",this.set(),this.save()}},pinObj:{init:function(){return this.get(),this.save()},get:function(){return i=t.get("pin")||"no"},save:function(){return t.save("pin",i)},change:function(){return"yes"===i?(i="no",o.keys.bind(),alert("~Pix2pix~\n\nИзображение откреплено!")):(i="yes",o.keys.unBind(),alert("~Pix2pix~\n\nИзображение закреплено!\n\nНажмите [ shift + ` ] для открепления.")),this.save()}},shadow:{sPower:"on",sColor:"",init:function(){return this.get(),"on"===this.sPower?this.set():this.remove()},set:function(){var t,e,n;if(console.log("sColor = "+this.sColor),console.log(document.getElementById("pix2pix__shadow")),null===document.getElementById("pix2pix__shadow"))n=document.createElement("style"),n.id="pix2pix__shadow",n.textContent="* {-webkit-box-shadow: 0px 0px 5px 1px #"+this.sColor+" ;box-shadow: 0px 0px 5px 1px #"+this.sColor+";}",e=document.body.firstChild,document.body.insertBefore(n,e);else try{document.getElementById("pix2pix__shadow").innerHTML="* {-webkit-box-shadow: 0px 0px 5px 1px #"+this.sColor+" ;box-shadow: 0px 0px 5px 1px #"+this.sColor+";}"}catch(o){t=o}return this.save()},remove:function(){var t;if(null!==document.getElementById("pix2pix__shadow"))try{document.getElementById("pix2pix__shadow").innerHTML=""}catch(e){t=e}return this.save()},get:function(){return this.sPower=null===t.get("shadowPower")?"on":t.get("shadowPower"),this.sColor=null===t.get("shadowColor")?"f33":t.get("shadowColor"),console.log(this.sPower)},save:function(){return t.save("shadowPower",this.sPower),t.save("shadowColor",this.sColor)},changeColor:function(){return this.sColor=this.randomHexColor(),this.set()},randomHexColor:function(){return""+Math.floor(16777215*Math.random()).toString(16)},toggle:function(){return"on"===this.sPower?(this.sPower="off",this.remove()):(this.sPower="on",this.set()),this.save()}},image:{path:"",init:function(){var t;return null===this.get()||"undefined"===this.get()||""===this.get()?(o.first=!0,t=prompt("~ Pix2pix ~\nПодробнее о плагине - [F1]\n\nУкажите путь к изображению (url)",e),null!=t&&""!==t?this.change(t):(o.destroy(),!1)):this.set()},set:function(){return o.layer.src=this.path,o.layer.onload=function(){return o.position.init()},this.save()},get:function(){return this.path=t.get("path")},save:function(){return t.save("path",this.path)},change:function(t){return this.path=t,this.set()}},opacity:{interVl:"",opacity:1,init:function(){return this.get(),this.set()},set:function(){return o.layer.style.opacity=this.opacity,o.layer.style.filter="alpha(opacity="+100*this.opacity+")",this.save()},get:function(){return null!==t.get("opacity")?this.opacity=1*t.get("opacity"):void 0},save:function(){return clearTimeout(this.interVl),this.interVl=setTimeout(function(){return t.save("opacity",o.opacity.opacity)},400)},change:function(t){return"+"===t?1!==1*this.opacity&&(this.opacity=(1*this.opacity+.1).toFixed(1)):0!==1*this.opacity&&(this.opacity=(this.opacity-.1).toFixed(1)),this.set()}},position:{left:0,top:0,interV:"",init:function(){var t;return this.get(),this.set(),o.first===!0?(t=-1*(o.layer.width/2),this.change(t,this.top)):void 0},set:function(){return o.layer.style.marginLeft=this.left+"px",o.layer.style.top=this.top+"px",this.save()},get:function(){return this.top=1*t.get("top")||0,this.left=1*t.get("left")||0},save:function(){return clearTimeout(this.interV),this.interV=setTimeout(function(){return t.save("top",o.position.top),t.save("left",o.position.left)},400)},change:function(t,e){return this.left=1*t,this.top=1*e,this.set()}},keys:{init:function(){return Mousetrap.bind("`",function(){return o.toggle.change(),!1},"keydown"),Mousetrap.bind("shift+`",function(){return o.pinObj.change(),!1},"keydown"),this.bind()},bind:function(){return Mousetrap.bind("shift+up",function(){return o.position.change(o.position.left,o.position.top-10),!1},"keydown"),Mousetrap.bind("up",function(){return o.position.change(o.position.left,o.position.top-1),!1},"keydown"),Mousetrap.bind("shift+down",function(){return o.position.change(o.position.left,o.position.top+10),!1},"keydown"),Mousetrap.bind("down",function(){return o.position.change(o.position.left,o.position.top+1),!1},"keydown"),Mousetrap.bind("shift+left",function(){return o.position.change(o.position.left-10,o.position.top),!1},"keydown"),Mousetrap.bind("left",function(){return o.position.change(o.position.left-1,o.position.top),!1},"keydown"),Mousetrap.bind("shift+right",function(){return o.position.change(o.position.left+10,o.position.top),!1},"keydown"),Mousetrap.bind("right",function(){return o.position.change(o.position.left+1,o.position.top),!1},"keydown")},unBind:function(){return Mousetrap.unbind(["shift+up","up","shift+down","down","shift+left","left","shift+right","right","*","shift+*"])}}},t={save:function(t,e){var n;t="pix2pix_"+t;try{return localStorage.setItem(t,e)}catch(o){return n=o,document.cookie=t+"="+window.escape(e)}},get:function(t){var e,n;t="pix2pix_"+t;try{return localStorage.getItem(t)}catch(o){return e=o,n=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)"),n?window.unescape(n[2]):null}},clearAll:function(){var t,e,n,o,i,r,s;try{localStorage.clear()}catch(a){n=a}for(e=document.cookie.split(";"),i=0,s=[];i<e.length;)t=e[i],o=t.indexOf("="),r=o>-1?t.substr(0,o):t,document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT",s.push(i++);return s}}}.call(this);